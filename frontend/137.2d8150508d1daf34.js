"use strict";(self.webpackChunkrawncafe_web=self.webpackChunkrawncafe_web||[]).push([[137],{1137:(b,c,a)=>{a.r(c),a.d(c,{ManageUsersModule:()=>Z});var i=a(9808),d=a(5697),e=a(4893),g=a(373),p=a(3116),l=a(2382);function h(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td")(4,"button",11),e.NdJ("click",function(){const u=e.CHM(t).$implicit;return e.oxw().goToUsersLoyaltyCard(u.user_id)}),e._uU(5),e.ALo(6,"titlecase"),e.qZA()(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.ALo(11,"date"),e.qZA()()}if(2&r){const t=s.$implicit;e.xp6(2),e.Oqu(t.card_number),e.xp6(3),e.hij(" ",e.lcZ(6,4,t.name)," "),e.xp6(3),e.Oqu(t.is_active?"Active":"Inactive"),e.xp6(2),e.Oqu(e.xi3(11,6,t.card_expiration_date,"MM/dd/yyyy"))}}let m=(()=>{class r{constructor(t,n,o){this.loyaltyCardService=t,this.router=n,this.authService=o,this.users=[],this.filterBy="name",this.searchQuery=""}ngOnInit(){this.loadUsers();const t=this.authService.getUserRole(),n=this.authService.getUserId();"user"===t&&this.router.navigate(["/loyalty-card",n])}loadUsers(){this.loyaltyCardService.getAllUsers().subscribe(t=>{this.users=t,console.log("data :",t)},t=>{console.error("Error loading users:",t)})}filteredUsers(){return this.users.filter(t=>"name"===this.filterBy?!this.searchQuery||t.name.toLowerCase().includes(this.searchQuery.toLowerCase()):"card_number"!==this.filterBy||!this.searchQuery||t.card_number.toString().includes(this.searchQuery))}goToUsersLoyaltyCard(t){this.router.navigate(["/loyalty-card",t])}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(g.y),e.Y36(d.F0),e.Y36(p.e))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-manage-users"]],decls:32,vars:5,consts:[[1,"container","mt-4",2,"background-color","white","padding","20px","border-radius","8px"],[1,"mb-4","text-left"],[1,"mb-4"],["for","filterBySelect",1,"form-label"],[1,"input-group","mb-3"],["type","button","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-outline-secondary","dropdown-toggle"],[1,"dropdown-menu"],[1,"dropdown-item",3,"click"],["type","text","placeholder","Type to search","aria-label","Text input with dropdown button",1,"form-control",3,"ngModel","ngModelChange"],[1,"table","table-bordered","table-striped"],[4,"ngFor","ngForOf"],[1,"btn","btn-link","p-0","text-decoration-none",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"h2",1)(2,"b"),e._uU(3,"Manage Users"),e.qZA()(),e.TgZ(4,"div",2)(5,"label",3),e._uU(6,"Filter By:"),e.qZA(),e.TgZ(7,"div",4)(8,"button",5),e._uU(9),e.ALo(10,"titlecase"),e.qZA(),e.TgZ(11,"ul",6)(12,"li")(13,"a",7),e.NdJ("click",function(){return n.filterBy="name"}),e._uU(14,"Name"),e.qZA()(),e.TgZ(15,"li")(16,"a",7),e.NdJ("click",function(){return n.filterBy="card_number"}),e._uU(17,"Card Number"),e.qZA()()(),e.TgZ(18,"input",8),e.NdJ("ngModelChange",function(u){return n.searchQuery=u}),e.qZA()()(),e.TgZ(19,"table",9)(20,"thead")(21,"tr")(22,"th"),e._uU(23,"Card No."),e.qZA(),e.TgZ(24,"th"),e._uU(25,"Name"),e.qZA(),e.TgZ(26,"th"),e._uU(27,"Status"),e.qZA(),e.TgZ(28,"th"),e._uU(29,"Expiration"),e.qZA()()(),e.TgZ(30,"tbody"),e.YNc(31,h,12,9,"tr",10),e.qZA()()()),2&t&&(e.xp6(9),e.hij(" ",e.lcZ(10,3,n.filterBy)," "),e.xp6(9),e.Q6J("ngModel",n.searchQuery),e.xp6(13),e.Q6J("ngForOf",n.filteredUsers()))},directives:[l.Fj,l.JJ,l.On,i.sg],pipes:[i.rS,i.uU],styles:[".container[_ngcontent-%COMP%]{transform:translateY(50px)}"]}),r})();var y=a(1735),f=a(5107);const U=[{path:"",component:m,canActivate:[y.p,f.a],data:{role:["user","admin","super-admin"]}}];let Z=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[i.ez,l.u5,d.Bz.forChild(U)]]}),r})()}}]);